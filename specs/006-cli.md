# **Specification 006: Command-Line Interface (CLI)**

## **1. Introduction**

This document specifies the command-line interface for the `pgtls` application. The CLI is the primary way a user will interact with the proxy to start it and provide its configuration.

## **2. CLI Library**

The CLI shall be implemented using the `clap` crate, which is the standard for building powerful and user-friendly command-line applications in Rust.

## **3. Main Command**

The main executable will be named `pgtls`.

### **3.1. Arguments and Options**

*   `-c, --config <PATH>`: (Required) Specifies the path to the TOML configuration file. The application will not start without a valid configuration file.
*   `-v, --version`: Prints the version of the application and exits.
*   `-h, --help`: Prints the help message and exits.

## **4. Subcommands**

Initially, the application will have a single implicit `run` command. In the future, other subcommands could be added for tasks like configuration validation or certificate generation assistance.

### **4.1. `run` (Default)**

This is the default operation. If no subcommand is specified, the proxy will attempt to start and run.

**Usage:**

```sh
# Start the proxy with a specified configuration file
pgtls --config /etc/pgtls/pgtls.toml
```

### **4.2. `validate` (Future consideration)**

A `validate` subcommand could be added to allow users to check their configuration file for syntax and semantic errors without starting the proxy.

**Usage (Future):**

```sh
# Validate the configuration file
pgtls validate --config /etc/pgtls/pgtls.toml
```

## **5. Example Usage**

```sh
# Display help information
$ pgtls --help
pgtls 0.1.0
A TLS proxy for PostgreSQL

USAGE:
    pgtls [OPTIONS]

OPTIONS:
    -c, --config <PATH>    Sets the path to the configuration file
    -h, --help             Print help information
    -v, --version          Print version information

# Run the proxy
$ pgtls --config pgtls.toml
INFO  pgtls > Starting pgtls proxy version 0.1.0
INFO  pgtls::listener > Listener started on 0.0.0.0:6432
...
